<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>TIC TAC TOE</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Ambient particles -->
  <canvas id="particles"></canvas>

  <!-- Setup Screen -->
  <div id="setup-screen" class="screen active">
    <div class="setup-content">
      <div class="logo">
        <span class="logo-x">X</span>
        <span class="logo-divider">/</span>
        <span class="logo-o">O</span>
      </div>
      <h1 class="title">TIC TAC TOE</h1>
      <p class="tagline">Challenge a friend. No mercy.</p>

      <div class="player-inputs">
        <div class="player-input-group">
          <label class="input-label">
            <span class="player-symbol x-symbol">X</span>
            Player 1
          </label>
          <input type="text" id="p1-name" class="name-input" placeholder="Enter name..." maxlength="12" autocomplete="off">
        </div>
        <div class="vs-badge">VS</div>
        <div class="player-input-group">
          <label class="input-label">
            <span class="player-symbol o-symbol">O</span>
            Player 2
          </label>
          <input type="text" id="p2-name" class="name-input" placeholder="Enter name..." maxlength="12" autocomplete="off">
        </div>
      </div>

      <button id="start-btn" class="btn-start">
        <span>LOCAL PLAY</span>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
      </button>

      <div class="mode-divider">
        <span>OR</span>
      </div>

      <button id="online-btn" class="btn-online">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
        <span>PLAY ONLINE</span>
      </button>
    </div>
  </div>

  <!-- Online Lobby Screen -->
  <div id="lobby-screen" class="screen">
    <div class="setup-content">
      <div class="logo">
        <span class="logo-x">X</span>
        <span class="logo-divider">/</span>
        <span class="logo-o">O</span>
      </div>
      <h1 class="title">ONLINE PLAY</h1>

      <div class="lobby-name-input">
        <label class="input-label">
          <span class="player-symbol" style="background: rgba(167,139,250,0.15); color: var(--accent);">?</span>
          Your Name
        </label>
        <input type="text" id="online-name" class="name-input" placeholder="Enter your name..." maxlength="12" autocomplete="off">
      </div>

      <div class="lobby-actions">
        <button id="create-room-btn" class="btn-lobby-action btn-create">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 8v8M8 12h8"/></svg>
          <span>CREATE ROOM</span>
        </button>

        <div class="lobby-divider">
          <span>OR</span>
        </div>

        <div class="join-section">
          <input type="text" id="room-code-input" class="name-input room-code-field" placeholder="Enter room code..." maxlength="6" autocomplete="off" style="text-transform: uppercase; text-align: center; letter-spacing: 4px; font-weight: 600;">
          <button id="join-room-btn" class="btn-lobby-action btn-join">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M13.8 12H3"/></svg>
            <span>JOIN ROOM</span>
          </button>
        </div>
      </div>

      <p class="lobby-error" id="lobby-error"></p>

      <button id="lobby-back-btn" class="btn-action" style="margin-top: 12px;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        <span>Back</span>
      </button>
    </div>
  </div>

  <!-- Waiting Room Screen -->
  <div id="waiting-screen" class="screen">
    <div class="setup-content">
      <div class="logo">
        <span class="logo-x">X</span>
        <span class="logo-divider">/</span>
        <span class="logo-o">O</span>
      </div>
      <h1 class="title">WAITING FOR OPPONENT</h1>
      <p class="tagline">Share this code with your friend</p>

      <div class="room-code-display">
        <span id="room-code-text">------</span>
        <button id="copy-code-btn" class="btn-copy" title="Copy code">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
        </button>
      </div>

      <div class="waiting-spinner">
        <div class="spinner"></div>
        <span>Waiting for player 2...</span>
      </div>

      <button id="cancel-wait-btn" class="btn-action" style="margin-top: 20px;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>
        <span>Cancel</span>
      </button>
    </div>
  </div>

  <!-- Game Screen -->
  <div id="game-screen" class="screen">
    <div class="game-header">
      <div class="player-card p1-card" id="p1-card">
        <div class="player-marker x-marker">X</div>
        <div class="player-info">
          <div class="player-name" id="p1-display">Player 1</div>
          <div class="player-score" id="p1-score">0</div>
        </div>
      </div>

      <div class="round-info">
        <div class="round-label">ROUND</div>
        <div class="round-number" id="round-num">1</div>
      </div>

      <div class="player-card p2-card" id="p2-card">
        <div class="player-info right">
          <div class="player-name" id="p2-display">Player 2</div>
          <div class="player-score" id="p2-score">0</div>
        </div>
        <div class="player-marker o-marker">O</div>
      </div>
    </div>

    <div class="turn-indicator" id="turn-indicator">
      <span id="turn-text">X's turn</span>
    </div>

    <div class="board-container">
      <div class="board" id="board">
        <div class="cell" data-index="0"></div>
        <div class="cell" data-index="1"></div>
        <div class="cell" data-index="2"></div>
        <div class="cell" data-index="3"></div>
        <div class="cell" data-index="4"></div>
        <div class="cell" data-index="5"></div>
        <div class="cell" data-index="6"></div>
        <div class="cell" data-index="7"></div>
        <div class="cell" data-index="8"></div>
      </div>
      <svg class="win-line" id="win-line" viewBox="0 0 300 300">
        <line id="strike" x1="0" y1="0" x2="0" y2="0" />
      </svg>
    </div>

    <div class="game-actions">
      <button class="btn-action" id="reset-btn" title="New Round">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        <span>New Round</span>
      </button>
      <button class="btn-action" id="menu-btn" title="Main Menu">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12h18M3 6h18M3 18h18"/></svg>
        <span>Menu</span>
      </button>
    </div>
  </div>

  <!-- Result Overlay -->
  <div id="result-overlay" class="overlay">
    <div class="result-card">
      <div class="result-icon" id="result-icon"></div>
      <div class="result-text" id="result-text">Player Wins!</div>
      <div class="result-sub" id="result-sub">Flawless victory</div>
      <div class="result-actions">
        <button class="btn-play-again" id="play-again-btn">Play Again</button>
        <button class="btn-back-menu" id="back-menu-btn">Main Menu</button>
      </div>
    </div>
  </div>

  <!-- Disconnect Overlay -->
  <div id="disconnect-overlay" class="overlay">
    <div class="result-card">
      <div class="result-icon">ðŸ‘‹</div>
      <div class="result-text">Opponent Left</div>
      <div class="result-sub">Your opponent has disconnected.</div>
      <div class="result-actions">
        <button class="btn-play-again" id="disconnect-menu-btn">Back to Menu</button>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="script.js"></script>
</body>
</html>
